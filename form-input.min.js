// form-input version 0.1.1
// https://github.com/DubFriend/form-input
// (MIT) 19-04-2015
// Brian Detering
(function(){"use strict";var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(b){return!a(b)&&b instanceof Object},c=function(a,b){return a.indexOf(b)},d=function(a,b){return-1!==c(a,b)},e=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},f=function(a,b){var c=[];return e(a,function(a,d,e){c.push(b(a,d,e))}),c},g=function(a,b,c){var d=c;return e(a,function(c,e){d=b(d,c,e,a)}),d},h=function(b,c){var d;return a(b)?(d=[],e(b,function(a,b,e){c(a,b,e)&&d.push(a)})):(d={},e(b,function(a,b,e){c(a,b,e)&&(d[b]=a)})),d},i=function(a){return h(a,function(a){return void 0!==a})},j=function(){var a,b={};for(a=0;a<arguments.length;a+=1)e(arguments[a],function(a,c){b[c]=a});return b},k=function(a,b){return h(a,function(a,d){return-1===c(b,d)})},l=(function(){var a=0;return function(){return a+=1}}(),function(c){c=c||{};var e={},h=c.feedbackOpen||"<span>",l=c.feedbackClose||"</span>",m=c.labelOpen||"<label>",n=c.labelClose||"</label>",o=c.groupOpen||"<div>",p=c.groupClose||"</div>",q=c.groupControlOpen||"<div>",r=c.groupControlClose||"</div>",s=function(a){return b(a.value)?void 0!==a.name&&void 0!==a.value[a.name]?a.value[a.name]:void 0:a.value},t=function(a){return i(f(a,function(b,c){var d;return"value"!==c?void 0===b?c:c+'="'+b+'"':(d=s(a))?'value="'+d+'"':void 0})).join(" ")};e.feedback=function(c,d,f){return f=f||{},f.feedbackOpen=f.feedbackOpen||h,f.feedbackClose=f.feedbackClose||l,b(c)?c[d]?e.feedback(c[d]):"":a(c)?e.feedback("<ul>"+g(c,function(a,b){return a+"<li>"+b+"</li>"},"")+"</ul>"):f.feedbackOpen+c+f.feedbackClose},e.input=function(c){return a(c.value)?g(c.value,function(a,d){return b(d)?a+'<label class="'+c.type+'-inline">'+d.label+e.input(j(c,{value:d.value}))+"</label>":a+e.input(j(c,{value:d}))},""):a(c.checked)&&d(c.checked,c.value)?e.input(j(c,{checked:void 0})):void 0!==c.value&&c.value===c.checked?e.input(j(c,{checked:void 0})):void 0!==c.checked?e.input(k(c,["checked"])):"<input "+t(c)+"/>"},e.select=function(a){var b=s(a),c=function(a){return b===a.value};return"<select "+t(k(a,["options","value"]))+">"+g(a.options,function(a,b){return a+'<option value="'+b.value+'"'+(c(b)?" selected":"")+">"+b.label+"</option>"},"")+"</select>"},e.textarea=function(a){var b=s(a);return"<textarea "+t(k(a,["value"]))+">"+(b?b:"")+"</textarea>"};var u=function(a){return/^<label/i.test(a)},v=function(a,b){if(u(a)&&void 0!==b.id){var c=a.split(/^<label/i);return c.shift(),c.unshift('<label for="'+b.id+'"'),c.join("")}return a};return e.group=function(a){var b={};b.feedbackOpen=a.feedbackOpen||h,b.feedbackClose=a.feedbackClose||l,b.labelOpen=a.labelOpen||m,b.labelClose=a.labelClose||n,b.groupOpen=a.groupOpen||o,b.groupClose=a.groupClose||p,b.groupControlOpen=a.groupControlOpen||q,b.groupControlClose=a.groupControlClose||r;var c=a.feedback?e.feedback(a.feedback,a.name,b):"",d=a.input||a.select||a.textarea;d=a.name?j({name:a.name},d):d;var f,g=a.label?v(b.labelOpen,d)+a.label+b.labelClose:"";return a.input?f=e.input(d):a.select?f=e.select(d):a.textarea&&(f=e.textarea(d)),b.groupOpen+g+b.groupControlOpen+f+c+b.groupControlClose+b.groupClose},e});"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports.formInputGenerator=l):root.formInputGenerator=l}).call(this);